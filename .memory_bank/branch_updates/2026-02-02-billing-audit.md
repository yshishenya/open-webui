- [x] **[BILLING][AUDIT]** Проверка корректности списаний (wallet + subscriptions)
  - Закрыта утечка денег: при недооценке токенов списание ограничивалось hold → часть стоимости не списывалась.
  - Усилен preflight: более консервативная оценка токенов (tiktoken + fallback), дефолтный cap для max output tokens.
  - Исправлено применение квот подписки: `plan.quotas` теперь читается по ключу `metric.value`, usage привязан к периоду подписки.
  - Усилена обработка вебхуков YooKassa: верификация по API провайдера + идемпотентность для subscription (без повторного продления).
  - YooKassa: добавлен timeout на HTTP-запросы; парсер вебхуков стал строже (валидирует `event`); опциональная защита вебхука через `YOOKASSA_WEBHOOK_TOKEN` и `?token=...` (не ломает `YOOKASSA_WEBHOOK_SECRET`).
  - Подписки: renewal теперь продлевает от `now`, если подписка просрочена (чтобы пользователь не терял оплаченные дни).
  - Тесты (docker): `pytest -q open_webui/test/apps/webui/utils/test_billing_integration.py open_webui/test/apps/webui/utils/test_billing_quota.py open_webui/test/apps/webui/routers/test_billing_topup.py open_webui/test/apps/webui/routers/test_billing_subscription_webhook.py` — 37 passed.
