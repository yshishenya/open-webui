# Copy this file to `.env` and fill in values as needed.
# Never commit `.env`.

####################################
# Docker Compose / Deployment
####################################

# Public port for the web UI (docker-compose.yaml maps this -> container:8080)
OPEN_WEBUI_PORT=3000

# Optional image tag override (docker-compose.yaml default: main)
WEBUI_DOCKER_TAG=main
# Optional image repository override (docker-compose.prod.yml)
WEBUI_IMAGE=yshishenya/yshishenya

# Postgres (docker-compose.yaml)
POSTGRES_DB=airis
POSTGRES_USER=airis
POSTGRES_PASSWORD=airis_password
POSTGRES_PORT=5432

# Security (required when WEBUI_AUTH=true)
WEBUI_AUTH=true
# Generate a strong secret, e.g.:
# python -c 'import secrets; print(secrets.token_hex(32))'
WEBUI_SECRET_KEY=

# Optional canonical base URL (some backend features use it)
WEBUI_URL=

# Optional Redis (recommended for features like OAuth state, rate limiting, tasks)
REDIS_URL=

####################################
# Providers
####################################

# Ollama URL for the backend to connect
# The path '/ollama' will be redirected to the specified backend URL
OLLAMA_BASE_URL=http://localhost:11434

# OpenAI (optional; can also be configured in the UI)
OPENAI_API_BASE_URL=
OPENAI_API_KEY=

# AUTOMATIC1111_BASE_URL=http://localhost:7860

####################################
# Compose overlays (optional)
####################################

# docker-compose.api.yaml (expose Ollama API)
OLLAMA_WEBAPI_PORT=11434

# docker-compose.data.yaml (persist Ollama data)
OLLAMA_DATA_DIR=./ollama-data

# docker-compose.gpu.yaml (GPU settings used by scripts/run-compose.sh)
OLLAMA_GPU_DRIVER=nvidia
OLLAMA_GPU_COUNT=1

# docker-compose.amdgpu.yaml (AMD ROCm tweak; advanced)
HSA_OVERRIDE_GFX_VERSION=11.0.0

# docker-compose.amdgpu.yaml / ollama image tag (default: latest / rocm)
OLLAMA_DOCKER_TAG=latest

# docker-compose.dev.yaml (dev overlay ports)
OPEN_WEBUI_API_PORT=8080
AIRIS_FRONTEND_PORT=5173

####################################
# Networking / Telemetry
####################################

# For production, you should only need one host as fastapi serves the built frontend + backend.
# For local CORS testing, you can set something like:
# CORS_ALLOW_ORIGIN=http://localhost:5173;http://localhost:8080
CORS_ALLOW_ORIGIN=*

# For production you should set this to match the proxy configuration (127.0.0.1)
FORWARDED_ALLOW_IPS=*

SCARF_NO_ANALYTICS=true
DO_NOT_TRACK=true
ANONYMIZED_TELEMETRY=false

####################################
# OAuth (login providers)
####################################

# Toggle whether OAuth can auto-create users (login for existing users still works).
ENABLE_OAUTH_SIGNUP=true
OAUTH_MERGE_ACCOUNTS_BY_EMAIL=true

# GitHub OAuth (shown on /auth when both are set)
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_CLIENT_SCOPE=user:email
# Leave empty to auto-generate callback URL: /oauth/github/login/callback
GITHUB_CLIENT_REDIRECT_URI=

# VK OAuth
VK_CLIENT_ID=
VK_CLIENT_SECRET=
VK_REDIRECT_URI=http://localhost:3000/api/v1/oauth/vk/callback
VK_OAUTH_SCOPE=email
VK_API_VERSION=5.131

# Yandex OAuth
YANDEX_CLIENT_ID=
YANDEX_CLIENT_SECRET=
YANDEX_REDIRECT_URI=http://localhost:3000/api/v1/oauth/yandex/callback
YANDEX_OAUTH_SCOPE=login:email login:info login:avatar

# Telegram widget auth
TELEGRAM_BOT_TOKEN=
TELEGRAM_BOT_NAME=
TELEGRAM_AUTH_ORIGIN=

####################################
# Email (SMTP) - optional
####################################

# Used to build verification/reset links in emails
FRONTEND_URL=http://localhost:3000

SMTP_HOST=
SMTP_PORT=25
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=Open WebUI

####################################
# Billing / YooKassa
####################################

ENABLE_BILLING_WALLET=true
ENABLE_BILLING_SUBSCRIPTIONS=false
LEAD_MAGNET_ENABLED=false
LEAD_MAGNET_CYCLE_DAYS=30
LEAD_MAGNET_QUOTAS='{"tokens_input":0,"tokens_output":0,"images":0,"tts_seconds":0,"stt_seconds":0}'

BILLING_DEFAULT_CURRENCY=RUB
BILLING_RATE_CARD_VERSION=2025-01
BILLING_HOLD_TTL_SECONDS=900
BILLING_MAX_DAILY_SPEND_DEFAULT_KOPEKS=0
BILLING_GRACE_PERIOD_DAYS=3
BILLING_TOPUP_TTL_DAYS=365
BILLING_TOPUP_PACKAGES_KOPEKS=100000,150000,500000,1000000

PUBLIC_PRICING_POPULAR_MODELS=
PUBLIC_PRICING_RECOMMENDED_TEXT_MODEL=
PUBLIC_PRICING_RECOMMENDED_IMAGE_MODEL=
PUBLIC_PRICING_RECOMMENDED_AUDIO_MODEL=
PUBLIC_PRICING_RATE_CARD_MODEL_LIMIT=50

YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=
YOOKASSA_WEBHOOK_SECRET=
YOOKASSA_API_URL=https://api.yookassa.ru/v3
